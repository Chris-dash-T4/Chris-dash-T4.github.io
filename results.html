<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>8wisdoms Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>8wisdoms</h1>
<hr>

<h1>Results</h1>

<h2>Elemental Axes: <span class="weight-300" id="element-label"></span></h2>
<div class="axis">
    <img id="img-earth" src="value_images/earth.png" height="128pt"/>
    <div class="bar earth" id="bar-earth"><div class="text-wrapper" id="earth"></div></div>
    <div class="bar air" id="bar-air"><div class="text-wrapper" id="air"></div></div>
    <img id="img-air" src="value_images/air.png" height="128pt"/>
</div>
<div class="axis">
    <img id="img-fire" src="value_images/fire.png" height="128pt"/>
    <div class="bar fire" id="bar-fire"><div class="text-wrapper" id="fire"></div></div>
    <div class="bar water" id="bar-water"><div class="text-wrapper" id="water"></div></div>
    <img id="img-water" src="value_images/water.png" height="128pt"/>
</div>
<h2>Community Axis: <span class="weight-300" id="community-label"></span></h2>
<div class="axis">
    <img id="img-community" src="value_images/community.svg" height="128pt"/>
    <div class="bar community" id="bar-community"><div class="text-wrapper" id="community"></div></div>
    <div class="bar individual" id="bar-individual"><div class="text-wrapper" id="individual"></div></div>
    <img id="img-individual" src="value_images/individual.svg" height="128pt"/>
</div>
<h2>Diplomacy Axis: <span class="weight-300" id="diplomacy-label"></span></h2>
<div class="axis">
    <img id="img-might" src="value_images/might.svg" height="128pt"/>
    <div class="bar might" id="bar-might"><div class="text-wrapper" id="might"></div></div>
    <div class="bar peace" id="bar-peace"><div class="text-wrapper" id="peace"></div></div>
    <img id="img-peace" src="value_images/peace.svg" height="128pt"/>
</div>
<h2>Spiritual Axis: <span class="weight-300" id="spirit-label"></span></h2>
<div class="axis">
    <img id="img-spirituality" src="value_images/spirituality.svg" height="128pt"/>
    <div class="bar spirituality" id="bar-spirituality"><div class="text-wrapper" id="spirituality"></div></div>
    <div class="bar material" id="bar-material"><div class="text-wrapper" id="material"></div></div>
    <img id="img-material" src="value_images/material.svg" height="128pt"/>
</div>
<h2>Societal Axis: <span class="weight-300" id="society-label"></span></h2>
<div class="axis">
    <img id="img-tradition" src="value_images/tradition.svg" height="128pt"/>
    <div class="bar tradition" id="bar-tradition"><div class="text-wrapper" id="tradition"></div></div>
    <div class="bar change" id="bar-change"><div class="text-wrapper" id="change"></div></div>
    <img id="img-change" src="value_images/change.svg" height="128pt"/>
</div>
<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Character matching is a work in progress, and is much less accurate than the values and axes.</p>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. Think your matched ideology was wrong? Want to help us calibrate the test? Send the results along with your political ideology to us at eightvalues@gmail.com, or send us any comments, questions, or criticism. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';">Back</button> <br>
<!-- Website visit statistics - no personal information is collected! -->
<script type="text/javascript">
var sc_project=11325211;
var sc_invisible=1;
var sc_security="fd9f0659";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web stats"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11325211/0/fd9f0659/1/" alt="web
stats"></a></div></noscript>
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    elemArray = ["Earth", "Fire", "Air", "Water", "Neutral"]
    commArray = ["Equalist","Community","Community","Centrist","Individual","Individual","Anarchist"]
    strnArray = ["Cosmopolitan","Internationalist","Peaceful","Neutral","Patriotic","Nationalist","Chauvinist"]
    sprtArray = ["Esoteric","Extreme Spiritual","Spiritual","Balanced","Materialistic","Extreme Materialistic","Technologist"]
    tradArray = ["Revolutionary","Very Progressive","Progressive","Neutral","Traditional","Very Traditional","Reactionary"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 70) { return ary[1] } else
        if (val > 55) { return ary[2] } else
        if (val >= 45) { return ary[3] } else
        if (val >= 20) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    community    = getQueryVariable("c")
    might        = getQueryVariable("s")
    spirituality = getQueryVariable("e")
    tradition    = getQueryVariable("t")
    individual   = (100 - community   ).toFixed(1)
    peace        = (100 - might       ).toFixed(1)
    material     = (100 - spirituality).toFixed(1)
    change       = (100 - tradition   ).toFixed(1)

    c_e = 0.35 * (community  - 50)
    s_e = 0.4  * (might      - 50)
    m_e = 0.2  * (material   - 50)
    t_e = 0.05 * (tradition  - 50)
    c_f = 0.4  * (individual - 50)
    s_f = 0.35 * (might      - 50)
    m_f = 0.05 * (material   - 50)
    t_f = 0.2  * (tradition  - 50)
    // TODO multiply
    earth = (50 + c_e + s_e + m_e + t_e).toFixed(1)
    fire  = (50 + c_f + s_f + m_f + t_f).toFixed(1)
    air   = (100 - earth).toFixed(1)
    water = (100 - fire ).toFixed(1)
    m = Math.max(earth, fire, air, water);
    e0 = "undefined"
    if (m < 53)
        e0 = "Neutral"
    else if (m == earth)
        e0 = "Earth"
    else if (m == fire)
        e0 = "Fire"
    else if (m == air)
        e0 = "Air"
    else if (m == water)
        e0 = "Water"

    setBarValue("earth", earth)
    setBarValue("air", air)
    setBarValue("water", water)
    setBarValue("fire", fire)
    setBarValue("community", community)
    setBarValue("individual", individual)
    setBarValue("might", might)
    setBarValue("peace", peace)
    setBarValue("spirituality", spirituality)
    setBarValue("material", material)
    setBarValue("change", change)
    setBarValue("tradition", tradition)

    document.getElementById("element-label").innerHTML = e0

    document.getElementById("community-label").innerHTML = setLabel(community, commArray)
    document.getElementById("diplomacy-label").innerHTML = setLabel(peace, strnArray)
    document.getElementById("spirit-label").innerHTML = setLabel(spirituality, sprtArray)
    document.getElementById("society-label").innerHTML = setLabel(change, tradArray)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(Math.abs(ideologies[i].stats.comm - community), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.sprt - spirituality), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.strn - might), 1.73856063)
        dist += Math.pow(Math.abs(ideologies[i].stats.trad - tradition), 1.73856063)
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 700;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,700);

        img = document.getElementById("img-community")
        ctx.drawImage(img, 20, 170, 100, 100);
        img = document.getElementById("img-individual")
        ctx.drawImage(img, 680, 170, 100, 100)
        img = document.getElementById("img-might")
        ctx.drawImage(img, 20, 290, 100, 100)
        img = document.getElementById("img-peace")
        ctx.drawImage(img, 680, 290, 100, 100)
        img = document.getElementById("img-spirituality")
        ctx.drawImage(img, 20, 410, 100, 100)
        img = document.getElementById("img-material")
        ctx.drawImage(img, 680, 410, 100, 100)
        img = document.getElementById("img-tradition")
        ctx.drawImage(img, 20, 530, 100, 100)
        img = document.getElementById("img-change")
        ctx.drawImage(img, 680, 530, 100, 100)

        ctx.fillStyle="#222222"
        ctx.fillRect(120, 180, 560, 80)
        ctx.fillRect(120, 300, 560, 80)
        ctx.fillRect(120, 420, 560, 80)
        ctx.fillRect(120, 540, 560, 80)
        ctx.fillStyle="#3f51b5"
        ctx.fillRect(120, 184, 5.6*community-2, 72)
        ctx.fillStyle="#ffeb3b"
        ctx.fillRect(682-5.6*individual, 184, 5.6*individual-2, 72)
        ctx.fillStyle="#f44336"
        ctx.fillRect(120, 304, 5.6*might-2, 72)
        ctx.fillStyle="#03a9f4"
        ctx.fillRect(682-5.6*peace, 304, 5.6*peace-2, 72)
        ctx.fillStyle="#9c27b0"
        ctx.fillRect(120, 424, 5.6*spirituality-2, 72)
        ctx.fillStyle="#00897b"
        ctx.fillRect(682-5.6*material, 424, 5.6*material-2, 72)
        ctx.fillStyle="#8bc34a"
        ctx.fillRect(120, 544, 5.6*tradition-2, 72)
        ctx.fillStyle="#ea90ab"
        ctx.fillRect(682-5.6*change, 544, 5.6*change-2, 72)
        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("8wisdoms", 20, 90)
        ctx.font="50px Montserrat"
        elem = document.getElementById("element-label").innerHTML
        img = document.getElementById("img-"+elem.toLowerCase())
        ctx.drawImage(img, 660, 20, 120, 120)
        ctx.fillText(elem, 20, 140)

        ctx.textAlign="left"
        if (earth        > 30) {ctx.fillText(community + "%", 130, 237.5)}
        if (fire         > 30) {ctx.fillText(might + "%", 130, 357.5)}
        if (spirituality > 30) {ctx.fillText(spirituality + "%", 130, 477.5)}
        if (tradition    > 30) {ctx.fillText(tradition + "%", 130, 597.5)}
        ctx.textAlign="right"
        if (air          > 30) {ctx.fillText(individual + "%", 670, 237.5)}
        if (water        > 30) {ctx.fillText(peace + "%", 670, 357.5)}
        if (material     > 30) {ctx.fillText(material + "%", 670, 477.5)}
        if (change       > 30) {ctx.fillText(change + "%", 670, 597.5)}

        ctx.font="300 30px Montserrat"
        ctx.textAlign="center"
        ctx.fillText("avatar.chris-t4.com", 400, 690)
        ctx.fillText("Community Axis: " + document.getElementById("community-label").innerHTML, 400, 175)
        ctx.fillText("Diplomacy Axis: " + document.getElementById("diplomacy-label").innerHTML, 400, 295)
        ctx.fillText("Spiritual Axis: " + document.getElementById("spirit-label").innerHTML, 400, 415)
        ctx.fillText("Societal Axis: " + document.getElementById("society-label").innerHTML, 400, 535)

        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
